# Домашнее задание к занятию "Резервное копирование" - `Гречихин Юрий`


### Инструкция по выполнению домашнего задания

   1. Сделайте `fork` данного репозитория к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/git-hw или  https://github.com/имя-вашего-репозитория/7-1-ansible-hw).
   2. Выполните клонирование данного репозитория к себе на ПК с помощью команды `git clone`.
   3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
      - впишите вверху название занятия и вашу фамилию и имя
      - в каждом задании добавьте решение в требуемом виде (текст/код/скриншоты/ссылка)
      - для корректного добавления скриншотов воспользуйтесь [инструкцией "Как вставить скриншот в шаблон с решением](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md)
      - при оформлении используйте возможности языка разметки md (коротко об этом можно посмотреть в [инструкции  по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md))
   4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`);
   5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
   6. Любые вопросы по выполнению заданий спрашивайте в чате учебной группы и/или в разделе “Вопросы по заданию” в личном кабинете.
   
Желаем успехов в выполнении домашнего задания!
Задание 1. Резервное копирование
1.1. Восстановление данных за предыдущий день
Подойдет полное резервное копирование (Full Backup), выполняемое ежедневно.

Плюсы: Простота восстановления, так как вся база сохраняется целиком.

Минусы: Требует больше места и времени на создание резервной копии.

1.2. Восстановление данных за час до поломки
Лучше использовать инкрементное (Incremental Backup) или дифференциальное (Differential Backup) копирование в сочетании с полным бэкапом.

Инкрементное: сохраняются только изменения с момента последнего бэкапа (полного или инкрементного).

Дифференциальное: сохраняются все изменения с момента последнего полного бэкапа.

Плюсы: Экономия места и времени на создание резервных копий.

Минусы: Восстановление сложнее, так как нужно применять цепочку бэкапов.

1.3. Моментальное переключение на работающую базу*
Да, такое возможно с помощью:

Репликации (Master-Slave, Master-Master) – при падении основной базы трафик автоматически переключается на реплику.

Кластеризации (PostgreSQL с Patroni, MySQL Group Replication) – автоматический failover при отказе узла.

Использование балансировщиков (HAProxy, ProxySQL) для автоматического перенаправления запросов.

Задание 2. PostgreSQL
2.1. Пример резервирования и восстановления
Резервное копирование (pg_dump):

bash
pg_dump -U username -d dbname -F c -f backup.dump
-F c – формат custom (подходит для pg_restore).

-f backup.dump – файл для сохранения.

Восстановление (pg_restore):

bash
pg_restore -U username -d dbname backup.dump
2.1. Автоматизация процесса*
Да, автоматизировать можно:

Скрипты + cron:

bash
# Пример скрипта в cron (ежедневный бэкап)
0 2 * * * pg_dump -U user -d db -f /backups/db_$(date +\%Y\%m\%d).dump
Инструменты:

Barman – специализированное ПО для бэкапов PostgreSQL.

WAL-G – бэкапы с поддержкой инкрементного копирования.

pgBackRest – продвинутое управление резервными копиями.

Задание 3. MySQL
3.1. Инкрементное резервное копирование
С помощью mysqlbinlog (бинлог-файлы):

bash
# Получение списка бинарных логов
mysqlbinlog --read-from-remote-server --host=localhost --user=root --password --raw mysql-bin.000001 mysql-bin.000002
Или с xtrabackup (Percona):

bash
# Полный бэкап
xtrabackup --backup --target-dir=/backups/full

# Инкрементный бэкап (изменения с момента последнего full)
xtrabackup --backup --target-dir=/backups/inc1 --incremental-basedir=/backups/full







